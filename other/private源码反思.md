
### 读 `private`源码反思

> 怎样才能更快的读一个类库的源码

又花了一下午的时间看完了`private`的源码， 前段时间已经在看， 但一直没有看完，没有理解，也没有掌握看源码的技巧。 今天看完，对源码的实现思路以及最终的效果有了一定的认识。虽然在细节上(如是否有必要`makeSafeToCall` )仍有不理解或者不赞同的地方， 但在`如何更快的阅读源码`这件事上应该说是有所收获。 

#### 之前

也明白要先从用法入手：先了解其API，知道其产生的效果。 但是效果却不好， 几方面：

1. **懒**： 懒着新搭建一个测试环境，简单写几个测试用例， 查看运行结果；
2. **急**：没有完全理解API和产生的结果， 就基于看源码。 不知目的看实现，只能事倍功半。



#### 改进

1. **不要懒**：快速理解一个类库的方法是把它实际的运行起来， 给它输入， 看它有怎样的输出，或者产生怎样的错误； 能快速的帮助自己把整体思路理清；这样在看源码的时候心中潜意识的就会有一根主线；循着主线走， 效率自然要高很多；
2. **不要急**：要真正弄明白类库要**解决什么问题**， 即**得到什么样的输入**， **产生什么样的输出**， **每个API在其中扮演的角色**，产生的效果； 再循着`结果=>实现=>细节`去反推；这样倒过来看源码， 思路会比较很清晰。 最后才是去扣具体的功能点、实现细节、实现方式的好坏等。
3. 读源码的很大阻力是相应理论知识的匮乏， 所以读的时候，要学会评估：此理论知识现在是否有时间和精力去学习， 如果没有， 那相关源码可以先放放， 简单知道其输出结果就好，实现细节就不要去深究了。























